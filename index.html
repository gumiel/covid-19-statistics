<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css">
</head>
<body>

	<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
		<a class="navbar-brand" href="#">Estadistica</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
			aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
	
		<div class="collapse navbar-collapse" id="navbarsExampleDefault">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item active">
					<a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false">Dropdown</a>
					<div class="dropdown-menu" aria-labelledby="dropdown01">
						<a class="dropdown-item" href="#">Action</a>
						<a class="dropdown-item" href="#">Another action</a>
						<a class="dropdown-item" href="#">Something else here</a>
					</div>
				</li>
			</ul>
			<form class="form-inline my-2 my-lg-0">
				<input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
				<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
			</form>
		</div>
	</nav>

	<main role="main" style="margin-top: 56px;">
	
		<div class="container">
			<!-- Example row of columns -->
			<div class="row">
				<div class="col-md-6">
					<div id="container" .>
						<h2>Datos nivel mundial.</h2>
						<p>Fecha de actualizacion: <span id="global-updated"></span></p>
						<p>Casos nivel mundial: <b><span id="global-cases" style="color:#36a2eb"></span></b></p>
						<p>Total de recuperados: <b><span id="global-recovered" style="color:#ffcd56"></span></b></p>
						<p>Total de fallecidos: <b><span id="global-deaths" style="color:#ff6384"></span></b></p>
						<p>Casos del dia de hoy: <span id="global-todayCases"></span></p>
						<p>Total de casos activos: <span id="global-active"></span></p>
						<p>Casos criticos: <span id="global-critical"></span></p>
						<p>Paises afectados: <span id="global-affectedCountries"></span></p>
					
						
					
						<canvas id="canvas"></canvas>
					</div>
				</div>
				<div class="col-md-6">
						<h2>Estatistica nivel mundial</h2>
					<canvas id="global-statistics-pie"></canvas>
				</div>
				<div class="col-md-4">
					<h2>Heading</h2>
					<p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor
						mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna
						mollis euismod. Donec sed odio dui. </p>
					<p><a class="btn btn-secondary" href="#" role="button">View details &raquo;</a></p>
				</div>
				<div class="col-md-4">
					<h2>Heading</h2>
					<p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor
						mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna
						mollis euismod. Donec sed odio dui. </p>
					<p><a class="btn btn-secondary" href="#" role="button">View details &raquo;</a></p>
				</div>
				<div class="col-md-4">
					<h2>Heading</h2>
					<p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula
						porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh,
						ut fermentum massa justo sit amet risus.</p>
					<p><a class="btn btn-secondary" href="#" role="button">View details &raquo;</a></p>
				</div>
			</div>
	
			<hr>
	
		</div> <!-- /container -->
	
	</main>
	
	<footer class="container">
		<p>&copy; Company 2017-2019</p>
	</footer>
	


<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" type="text/javascript"></script>
<script>



window.onload = function () {

}

var global_data ={
	cases: 0,
	recovered: 0,
	deaths: 0,
}





fetch('https://corona.lmao.ninja/all')
.then(function (response) {
	return response.json();
})
.then(function (myJson) {

	global_data = {
		cases: myJson.cases,
		recovered: myJson.recovered,
		deaths: myJson.deaths,
	}
	
	document.getElementById("global-updated").innerHTML = new Date(myJson.updated);
	document.getElementById("global-cases").innerHTML = myJson.cases;
	document.getElementById("global-todayCases").innerHTML = myJson.todayCases;
	document.getElementById("global-recovered").innerHTML = myJson.recovered;
	document.getElementById("global-deaths").innerHTML = myJson.deaths;
	document.getElementById("global-active").innerHTML = myJson.active;
	document.getElementById("global-critical").innerHTML = myJson.critical;
	document.getElementById("global-affectedCountries").innerHTML = myJson.affectedCountries;
	console.log(myJson);

	generarGlobalStatisticsPie(global_data);

	
});

	

	function generarGlobalStatisticsPie(global_data)
	{


		var randomScalingFactor = function () {
			return Math.round(Math.random() * 100);
		};



		var config = {
			type: 'pie',
			data: {
				datasets: [{
					data: [
						global_data.cases,
						global_data.recovered,
						global_data.deaths,
					],
					backgroundColor: [
						window.chartColors.blue,
						window.chartColors.yellow,
						window.chartColors.red,
					],
					label: 'Global'
				}],
				labels: [
					'Casos '+ global_data.cases,
					'Recuperados '+ global_data.recovered,
					'Fallecidos '+ global_data.deaths,
				]
			},
			options: {
				responsive: true
			}
		};

		
			var ctx = document.getElementById('global-statistics-pie').getContext('2d');
			window.myPie = new Chart(ctx, config);
		

		document.getElementById('randomizeData').addEventListener('click', function () {
			config.data.datasets.forEach(function (dataset) {
				dataset.data = dataset.data.map(function () {
					return randomScalingFactor();
				});
			});

			window.myPie.update();
		});

		var colorNames = Object.keys(window.chartColors);
		document.getElementById('addDataset').addEventListener('click', function () {
			var newDataset = {
				backgroundColor: [],
				data: [],
				label: 'New dataset ' + config.data.datasets.length,
			};

			for (var index = 0; index < config.data.labels.length; ++index) {
				newDataset.data.push(randomScalingFactor());

				var colorName = colorNames[index % colorNames.length];
				var newColor = window.chartColors[colorName];
				newDataset.backgroundColor.push(newColor);
			}

			config.data.datasets.push(newDataset);
			window.myPie.update();
		});

		document.getElementById('removeDataset').addEventListener('click', function () {
			config.data.datasets.splice(0, 1);
			window.myPie.update();
		});

	}

	
	console.log('***************');
	console.log(global_data);

	
window.chartColors = {
	red: 'rgb(255, 99, 132)',
	orange: 'rgb(255, 159, 64)',
	yellow: 'rgb(255, 205, 86)',
	green: 'rgb(75, 192, 192)',
	blue: 'rgb(54, 162, 235)',
	purple: 'rgb(153, 102, 255)',
	grey: 'rgb(201, 203, 207)'
};

(function(global) {
	var MONTHS = [
		'January',
		'February',
		'March',
		'April',
		'May',
		'June',
		'July',
		'August',
		'September',
		'October',
		'November',
		'December'
	];

	var COLORS = [
		'#4dc9f6',
		'#f67019',
		'#f53794',
		'#537bc4',
		'#acc236',
		'#166a8f',
		'#00a950',
		'#58595b',
		'#8549ba'
	];

	var Samples = global.Samples || (global.Samples = {});
	var Color = global.Color;

	Samples.utils = {
		// Adapted from http://indiegamr.com/generate-repeatable-random-numbers-in-js/
		srand: function(seed) {
			this._seed = seed;
		},

		rand: function(min, max) {
			var seed = this._seed;
			min = min === undefined ? 0 : min;
			max = max === undefined ? 1 : max;
			this._seed = (seed * 9301 + 49297) % 233280;
			return min + (this._seed / 233280) * (max - min);
		},

		numbers: function(config) {
			var cfg = config || {};
			var min = cfg.min || 0;
			var max = cfg.max || 1;
			var from = cfg.from || [];
			var count = cfg.count || 8;
			var decimals = cfg.decimals || 8;
			var continuity = cfg.continuity || 1;
			var dfactor = Math.pow(10, decimals) || 0;
			var data = [];
			var i, value;

			for (i = 0; i < count; ++i) {
				value = (from[i] || 0) + this.rand(min, max);
				if (this.rand() <= continuity) {
					data.push(Math.round(dfactor * value) / dfactor);
				} else {
					data.push(null);
				}
			}

			return data;
		},

		labels: function(config) {
			var cfg = config || {};
			var min = cfg.min || 0;
			var max = cfg.max || 100;
			var count = cfg.count || 8;
			var step = (max - min) / count;
			var decimals = cfg.decimals || 8;
			var dfactor = Math.pow(10, decimals) || 0;
			var prefix = cfg.prefix || '';
			var values = [];
			var i;

			for (i = min; i < max; i += step) {
				values.push(prefix + Math.round(dfactor * i) / dfactor);
			}

			return values;
		},

		months: function(config) {
			var cfg = config || {};
			var count = cfg.count || 12;
			var section = cfg.section;
			var values = [];
			var i, value;

			for (i = 0; i < count; ++i) {
				value = MONTHS[Math.ceil(i) % 12];
				values.push(value.substring(0, section));
			}

			return values;
		},

		color: function(index) {
			return COLORS[index % COLORS.length];
		},

		transparentize: function(color, opacity) {
			var alpha = opacity === undefined ? 0.5 : 1 - opacity;
			return Color(color).alpha(alpha).rgbString();
		}
	};

	// DEPRECATED
	window.randomScalingFactor = function() {
		return Math.round(Samples.utils.rand(-100, 100));
	};

	// INITIALIZATION

	Samples.utils.srand(Date.now());

	// Google Analytics
	/* eslint-disable */
	if (document.location.hostname.match(/^(www\.)?chartjs\.org$/)) {
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-28909194-3', 'auto');
		ga('send', 'pageview');
	}
	/* eslint-enable */

}(this));
</script>

<script>
	var MONTHS = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
	var color = Chart.helpers.color;
	var horizontalBarChartData = {
		labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
		datasets: [{
			label: 'Dataset 1',
			backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
			borderColor: window.chartColors.red,
			borderWidth: 1,
			data: [
				randomScalingFactor(),
				randomScalingFactor(),
				randomScalingFactor(),
				randomScalingFactor(),
				randomScalingFactor(),
				randomScalingFactor(),
				randomScalingFactor()
			]
		}, {
			label: 'Dataset 2',
			backgroundColor: color(window.chartColors.blue).alpha(0.5).rgbString(),
			borderColor: window.chartColors.blue,
			data: [
				randomScalingFactor(),
				randomScalingFactor(),
				randomScalingFactor(),
				randomScalingFactor(),
				randomScalingFactor(),
				randomScalingFactor(),
				randomScalingFactor()
			]
		}]

	};

	window.onload = function() {
		var ctx = document.getElementById('canvas').getContext('2d');
		window.myHorizontalBar = new Chart(ctx, {
			type: 'horizontalBar',
			data: horizontalBarChartData,
			options: {
				// Elements options apply to all of the options unless overridden in a dataset
				// In this case, we are setting the border of each horizontal bar to be 2px wide
				elements: {
					rectangle: {
						borderWidth: 2,
					}
				},
				responsive: true,
				legend: {
					position: 'right',
				},
				title: {
					display: true,
					text: 'Chart.js Horizontal Bar Chart'
				}
			}
		});

	};

	document.getElementById('randomizeData').addEventListener('click', function() {
		var zero = Math.random() < 0.2 ? true : false;
		horizontalBarChartData.datasets.forEach(function(dataset) {
			dataset.data = dataset.data.map(function() {
				return zero ? 0.0 : randomScalingFactor();
			});

		});
		window.myHorizontalBar.update();
	});

	var colorNames = Object.keys(window.chartColors);

	document.getElementById('addDataset').addEventListener('click', function() {
		var colorName = colorNames[horizontalBarChartData.datasets.length % colorNames.length];
		var dsColor = window.chartColors[colorName];
		var newDataset = {
			label: 'Dataset ' + (horizontalBarChartData.datasets.length + 1),
			backgroundColor: color(dsColor).alpha(0.5).rgbString(),
			borderColor: dsColor,
			data: []
		};

		for (var index = 0; index < horizontalBarChartData.labels.length; ++index) {
			newDataset.data.push(randomScalingFactor());
		}

		horizontalBarChartData.datasets.push(newDataset);
		window.myHorizontalBar.update();
	});

	document.getElementById('addData').addEventListener('click', function() {
		if (horizontalBarChartData.datasets.length > 0) {
			var month = MONTHS[horizontalBarChartData.labels.length % MONTHS.length];
			horizontalBarChartData.labels.push(month);

			for (var index = 0; index < horizontalBarChartData.datasets.length; ++index) {
				horizontalBarChartData.datasets[index].data.push(randomScalingFactor());
			}

			window.myHorizontalBar.update();
		}
	});

	document.getElementById('removeDataset').addEventListener('click', function() {
		horizontalBarChartData.datasets.pop();
		window.myHorizontalBar.update();
	});

	document.getElementById('removeData').addEventListener('click', function() {
		horizontalBarChartData.labels.splice(-1, 1); // remove the label first

		horizontalBarChartData.datasets.forEach(function(dataset) {
			dataset.data.pop();
		});

		window.myHorizontalBar.update();
	});
</script>















</body>

</html>